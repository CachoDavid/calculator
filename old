// JavaScript
window.addEventListener('DOMContentLoaded', () => {
  const displayResults = document.getElementById('displayResults');
  const calculation = document.getElementById('calculation');
  const displayNumbers = document.getElementById('displayNumbers');
  const result = document.getElementById('result');
  const buttons = document.querySelectorAll('.button');
  let currentCalculation = '';
  let currentResult = '';

  buttons.forEach(button => {
    button.addEventListener('click', () => {
      const buttonValue = button.textContent;

      if (buttonValue === '=') {
        calculateResult();
      } else if (buttonValue === 'C') {
        clearAll();
      } else if (buttonValue === 'CE') {
        clearRow();
      } else if (buttonValue === '<') {
        removeLastChar();
      } else {
        updateCalculation(buttonValue);
      }
    });
  });

  function updateCalculation(value) {
    currentCalculation += value;
    calculation.textContent = currentCalculation;
    displayResults.textContent = currentCalculation; 
  }

  function calculateResult() {
    try {
      currentResult = eval(currentCalculation);
      result.textContent = currentResult;
    } catch (error) {
      result.textContent = 'Error';
    }
  }

  function clearAll() {
    currentCalculation = '';
    currentResult = '';
    calculation.textContent = '';
    result.textContent = '';
  }

  function clearRow() {
    currentCalculation = currentCalculation.slice(0, -1);
    calculation.textContent = currentCalculation;
  }

  function removeLastChar() {
    currentCalculation = currentCalculation.slice(0, -1);
    currentResult = currentResult.slice(0, -1);
    calculation.textContent = currentCalculation;
    result.textContent = currentResult;
  }

  function displayResult(value) {
    result.textContent = value;
  }

  function toggleCursorAnimation() {
    cursor.style.visibility = (cursor.style.visibility === 'hidden') ? 'visible' : 'hidden';
  }

  setInterval(toggleCursorAnimation, 500);
});
